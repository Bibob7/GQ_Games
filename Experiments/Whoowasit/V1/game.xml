<?xml version="1.0" encoding="UTF-8"?>
<game
	name="WW V_1"
	xmlformat="5"
>
	<!-- -->
	<!-- ################################################################ -->
	<!-- GAME INTRODUCTION -->
	<mission
		id="Game_Intro"
		image="drawable/Game_Intro.jpg"
		type="NPCTalk"
	>
		<onStart>
			<rule>
				<action type="Vibrate" />
			</rule>
		</onStart>
		<onEnd>
			<rule>
				<action
					id="Suspects_Presentation"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Willkommen zu "Wer War's?" ...
		</dialogitem>
		<dialogitem>Hier erklären wir dir in Kürze die Spielidee und deine
			Aufgabe ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- SUSPECTS PRESENTATION -->
	<mission
		id="Suspects_Presentation"
		image="drawable/Suspects_Presentation.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Suspect_1"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Die folgenden Personen sind verdächtig:
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<mission
		id="Suspect_1"
		image="drawable/Suspect_1.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Suspect_2"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Verdächtiger EINS ... TODO
		</dialogitem>
	</mission>
	<mission
		id="Suspect_2"
		image="drawable/Suspect_2.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Rooms_Presentation"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Verdächtiger ZWEI ... TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- ROOMS PRESENTATION -->
	<mission
		id="Rooms_Presentation"
		image="drawable/Rooms_Presentation.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>In den folgenden Räumen findet das Spiel statt ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- GAME ACTION (might be used for rounds) -->
	<mission
		id="Game_Action"
		image="drawable/Game_Action.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Du kannst im Spiel eine der folgenden Aktionen durchführen
			...
		</dialogitem>
		<dialogitem>1. Zu einem der Räume gehen und dort den QR Code scannen
		</dialogitem>
		<dialogitem>2. Zu einem der Tiere gehen und mit ihnen sprechen (QR
			Code scannen)
		</dialogitem>
		<dialogitem>3. Zu einer der Truhen gehen und versuchen sie zu öffnen
			(QR Code scannen)
		</dialogitem>
	</mission>
	<mission
		type="QRTagReading"
		id="Game_Action_Scanner"
		taskdescription="Gehe zu einem Raum, einem Tier oder einer Truhe ..."
		mode="treasure"
		initial_image="drawable/Game_Action_Scanner.jpg"
	>
		<onEnd>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Room_A</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Room_A" />
			</rule>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Room_B</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Room_B" />
			</rule>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Animal_A</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Animal_A" />
			</rule>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Animal_B</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Animal_B" />
			</rule>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Chest_A</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Chest_A" />
			</rule>
			<rule>
				<if>
					<eq>
						<var>$_Game_Action_Scanner.result</var>
						<string>Chest_B</string>
					</eq>
				</if>
				<action
					type="StartMission"
					id="Chest_B" />
			</rule>
		</onEnd>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- ROOM A -->
	<mission
		id="Room_A"
		loopUntilSuccess="false"
		type="MultipleChoiceQuestion"
	>
		<onStart>
			<rule>
				<action type="Vibrate" />
			</rule>
		</onStart>
		<onEnd>
			<rule>
				<!-- Back to Action Scanner to interact with animal or chest: -->
				<if>
					<missionState
						id="Room_A"
						state="failed" />
				</if>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
			<!-- Look around: -->
			<rule>
				<if>
					<and>
						<!-- Success means Player looks: -->
						<missionState
							id="Room_A"
							state="succeeded" />
						<eq>
							<!-- 0 means its still there, i.e. initial state -->
							<var>Food_A</var>
							<num>0</num>
						</eq>
					</and>
				</if>
				<action
					id="Find_Food_A"
					type="StartMission" />
			</rule>
			<rule>
				<if>
					<and>
						<!-- Success means Player looks: -->
						<missionState
							id="Room_A"
							state="succeeded" />
						<eq>
							<!-- 1 means its gone, i.e. already taken -->
							<var>Food_A</var>
							<num>1</num>
						</eq>
					</and>
				</if>
				<action
					id="Find_Nothing"
					type="StartMission" />
				<!-- DO WE COME BACK TO HERE? THEN call the game action scanner here
					at end. TODO -->
			</rule>
		</onEnd>
		<question>
			<questiontext> Du bist in Raum A. Was möchtest du tun?
			</questiontext>
			<answer
				correct="0"
				onChoose="Dazu scanne bitte den zugehörigen QR Code"
			> Mit Tier A sprechen
			</answer>
			<answer
				correct="0"
				onChoose="Dazu scanne bitte den zugehörigen QR Code"
			> Die Truhe hier in Raum A untersuchen
			</answer>
			<answer
				correct="1"
				onChoose="OK. Mal sehen, ob du etwas findest ..."
			> Dich umschauen
			</answer>
		</question>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- ROOM B -->
	<mission
		id="Room_B"
		loopUntilSuccess="false"
		type="MultipleChoiceQuestion"
	>
		<onStart>
			<rule>
				<action type="Vibrate" />
			</rule>
		</onStart>
		<onEnd>
			<rule>
				<!-- Back to Action Scanner to interact with animal or chest: -->
				<if>
					<missionState
						id="Room_B"
						state="failed" />
				</if>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
			<!-- Look around: -->
			<rule>
				<if>
					<and>
						<!-- Success means Player looks: -->
						<missionState
							id="Room_B"
							state="succeeded" />
						<eq>
							<!-- 0 means its still there, i.e. initial state -->
							<var>Food_B</var>
							<num>0</num>
						</eq>
					</and>
				</if>
				<action
					id="Find_Food_B"
					type="StartMission" />
			</rule>
			<rule>
				<if>
					<and>
						<!-- Success means Player looks: -->
						<missionState
							id="Room_B"
							state="succeeded" />
						<eq>
							<!-- 1 means its gone, i.e. already taken -->
							<var>Food_B</var>
							<num>1</num>
						</eq>
					</and>
				</if>
				<action
					id="Find_Nothing"
					type="StartMission" />
				<!-- DO WE COME BACK TO HERE? THEN call the game action scanner here
					at end. TODO -->
			</rule>
		</onEnd>
		<question>
			<questiontext> Du bist in Raum B. Was möchtest du tun?
			</questiontext>
			<answer
				correct="0"
				onChoose="Dazu scanne bitte den zugehörigen QR Code"
			> Mit Tier B sprechen
			</answer>
			<answer
				correct="0"
				onChoose="Dazu scanne bitte den zugehörigen QR Code"
			> Die Truhe hier in Raum B untersuchen
			</answer>
			<answer
				correct="1"
				onChoose="OK. Mal sehen, ob du etwas findest ..."
			> Dich umschauen
			</answer>
		</question>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- ANIMAL A -->
	<mission
		id="Animal_A"
		image="drawable/Animal_A.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Ich bin Tier A ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- ANIMAL B -->
	<mission
		id="Animal_B"
		image="drawable/Animal_B.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Ich bin Tier B ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- CHEST A -->
	<mission
		id="Chest_A"
		image="drawable/Chest_A.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Du versuchst die Truhe A zu öffnen ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- CHEST B -->
	<mission
		id="Chest_B"
		image="drawable/Chest_B.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<dialogitem>Du versuchst die Truhe B zu öffnen ...
		</dialogitem>
		<dialogitem>TODO
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- FIND FOOD A -->
	<mission
		id="Find_Food_A"
		image="drawable/Food_A.jpg"
		type="NPCTalk"
	>
		<onStart>
			<rule>
				<action
					var="Food_A"
					type="SetVariable"
				>
					<!-- 1 means its already taken, i.e. we move it in our "inventory" -->
					<value>
						<num>1</num>
					</value>
				</action>
			</rule>
		</onStart>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<!-- We SHOULD not do anything onEnd and instead come back to the calling
			mission ... TODO -->
		<dialogitem>Du findest Essen A!
		</dialogitem>
		<dialogitem>Benutze es weise, um den magischen Ring wieder zu finden.
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- FIND FOOD B -->
	<mission
		id="Find_Food_B"
		image="drawable/Food_B.jpg"
		type="NPCTalk"
	>
		<onStart>
			<rule>
				<action
					var="Food_B"
					type="SetVariable"
				>
					<!-- 1 means its already taken, i.e. we move it in our "inventory" -->
					<value>
						<num>1</num>
					</value>
				</action>
			</rule>
		</onStart>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<!-- We SHOULD not do anything onEnd and instead come back to the calling
			mission ... TODO -->
		<dialogitem>Du findest Essen B!
		</dialogitem>
		<dialogitem>Benutze es weise, um den magischen Ring wieder zu finden.
		</dialogitem>
	</mission>
	<!-- -->
	<!-- ################################################################ -->
	<!-- FIND NOTHING -->
	<mission
		id="Find_Nothing"
		image="drawable/Nothing.jpg"
		type="NPCTalk"
	>
		<onEnd>
			<rule>
				<action
					id="Game_Action_Scanner"
					type="StartMission" />
			</rule>
		</onEnd>
		<!-- We SHOULD not do anything onEnd and instead come back to the calling
			mission ... TODO -->
		<dialogitem>Hier ist nichts.
		</dialogitem>
		<dialogitem>Vielleicht musst du woanders suchen oder mit Tieren
			sprechen?
		</dialogitem>
	</mission>
</game>